import { defineStore } from 'pinia';
import Cookies from 'js-cookie';

interface Translations {
  [key: string]: {
    [key: string]: string;
  };
}

export const useutf8Store = defineStore('utf8', {
  state: () => {
    // Check if language is stored in cookies, otherwise default to Spanish
    const savedLanguage = Cookies.get('language') || 'es';

    return {
      currentLanguage: savedLanguage,
      translations: {
        en: {
          'producto.list.error': 'Error loading products',
          'producto.list.empty': 'No products available',
          'producto.details': 'View Details',
          'producto.buy': 'Buy',
          'producto.price': 'Price',
          'producto.stock': 'Stock',
          'producto.brand': 'Brand',
          'producto.state': 'State',
          'producto.available': '{stock} available',
          'producto.no_stock': 'Out of stock',
          'producto.loading': 'Loading products...',
          'common.ok': 'OK',
          'links.categoria.add': 'Add category',
          'links.categoria.list': 'Category list',
          'links.dashboard': 'Dashboard',
          'links.settings': 'Settings',
          'links.profile': 'Profile',
          'links.help': 'Help',
          'links.logout': 'Logout',
          'login.title': 'Sign in to your account',
          'login.email': 'Email address',
          'login.username': 'Username',
          'login.usernamePassword': 'Username or password is incorrect',
          'login.password': 'Password',
          'login.allInputs': 'All fields are required. Please fill in all fields.',
          'login.remember': 'Remember me',
          'login.forgot': 'Forgot your password?',
          'login.submit': 'Sign in',
          'login.loginError': 'Login error',
          'language': 'Language',
          'language.en': 'English',
          'language.es': 'Spanish',
          'language.cat': 'Catalan',
          'language.select': 'Select your language',
          'login.login': 'Login',
          'login.register': 'Register',
          'login.forgotPassword': 'Forgot Password',
          'signup.title': 'Create an account',
          'signup.email': 'Email address',
          'signup.emailExists': 'Email already exists',
          'signup.username': 'Username',
          'signup.usernameError': 'Username is incorrect. Minimum 5 characters, no spaces and maximum 20 characters',
          'signup.usernameExists': 'Username already exists',
          'signup.password': 'Password',
          'signup.confirmPassword': 'Confirm Password',
          'signup.submit': 'Create Account',
          'signup.login': 'Already have an account? Sign in',
          'signup.passwordMismatch': 'Passwords do not match',
          'signup.passwordLength': 'Password must be at least 6 characters long',
          'signup.invalidEmail': 'Invalid email address',
          'signup.emptyFields': 'All fields are required',
          'modal.close': 'Close',
          'modal.error': 'Error',
          'modal.success': 'Success',
          'modal.warning': 'Warning',
          'modal.info': 'Information',
          'modal.confirm': 'Confirm',
          'modal.cancel': 'Cancel',
          'modal.save': 'Save',
          'modal.delete': 'Delete',
          'modal.edit': 'Edit',
          'categoria.title': 'Create Category',
          'categoria.edit': 'Edit Category',
          'categoria.form.title': 'Title',
          'categoria.form.description': 'Description',
          'categoria.form.fields': 'Fields',
          'categoria.form.addField': 'Add Field',
          'categoria.form.fieldPlaceholder': 'Field name',
          'categoria.form.save': 'Save',
          'categoria.form.update': 'Update',
          'categoria.form.cancel': 'Cancel',
          'categoria.form.back': 'Back',
          'categoria.form.field': 'field',
          'categoria.form.fieldsPlural': 'fields',
          'categoria.error.server': 'Server error',
          'categoria.error.unknown': 'Unknown error',
          'categoria.error.loading': 'Error loading category',
          'categoria.error.saving': 'Error saving category',
          'categoria.validation.emptyFields': 'Fields cannot be empty',
          'categoria.success.created': 'Category created successfully',
          'categoria.success.updated': 'Category updated successfully',
          'categoria.list.title': 'Categories List',
          'categoria.list.add': 'Add Category',
          'categoria.list.loading': 'Loading categories...',
          'categoria.list.error': 'Error loading categories:',
          'categoria.list.empty': 'No categories available',
          'categoria.list.delete.title': 'Are you sure?',
          'categoria.list.delete.text': 'This action will permanently delete the category',
          'categoria.list.delete.confirm': 'Yes, delete',
          'categoria.list.delete.cancel': 'Cancel',
          'categoria.list.delete.success': 'Category successfully deleted',
          'categoria.list.delete.error': 'Error deleting category',
          'navigation.static': 'Static Links',
          'navigation.dynamic': 'Context Menu',
          'login.session_expired': 'Session expired. Please log in again.',
          'auth.access_denied': 'Access denied: The role {role} does not have permission to access this page.',
          'auth.login_required': 'Please login to continue.',
          'auth.unexpected_error': 'Unexpected error occurred.',
          'roles.ADMIN': 'Administrator',
          'roles.COMPRADOR': 'Buyer',
          'roles.VENDEDOR': 'Seller',
          'roles.TRABAJADOR': 'Worker',
          'header.welcome': 'Welcome',
          'header.menu': 'Menu',
          'header.toggle_menu': 'Toggle menu',
          'route.home': 'Home',
          'route.login': 'Login',
          'route.signup': 'Sign up',
          'route.profile': 'Profile',
          'route.categories': 'Categories',
          'route.create_category': 'Create Category',
          'route.edit_category': 'Edit Category',
          'error.404': 'Page not found',
          'error.403': 'Forbidden',
          'error.500': 'Server error',
          'error.generic': 'Something went wrong',
          'actions.save': 'Save',
          'actions.cancel': 'Cancel',
          'actions.edit': 'Edit',
          'actions.delete': 'Delete',
          'actions.view': 'View',
          'actions.back': 'Back',
          'actions.next': 'Next',
          'actions.previous': 'Previous',
          'common.loading': 'Loading...',
          'common.error': 'Error',
          'common.success': 'Success',
          'common.warning': 'Warning',
          'common.info': 'Information',
        },
        es: {
          'producto.list.error': 'Error al cargar los productos',
          'producto.list.empty': 'No hay productos disponibles',
          'producto.details': 'Ver Detalles',
          'producto.buy': 'Comprar',
          'producto.price': 'Precio',
          'producto.stock': 'Stock',
          'producto.brand': 'Marca',
          'producto.state': 'Estado',
          'producto.available': '{stock} disponibles',
          'producto.no_stock': 'Sin stock',
          'producto.loading': 'Cargando productos...',
          'common.ok': 'Aceptar',
          'links.categoria.add': 'Añadir categoría',
          'links.categoria.list': 'Lista de categorías',
          'links.dashboard': 'Panel de control',
          'links.settings': 'Configuración',
          'links.profile': 'Perfil',
          'links.help': 'Ayuda',
          'links.logout': 'Cerrar sesión',
          'login.title': 'Iniciar sesión',
          'login.email': 'Correo electrónico',
          'login.username': 'Nombre de usuario',
          'login.usernamePassword': 'Nombre de usuario o contraseña incorrectos',
          'login.password': 'Contraseña',
          'login.allInputs': 'Todos los campos son obligatorios. Por favor, completa todos los campos.',
          'login.remember': 'Recordarme',
          'login.forgot': '¿Olvidaste tu contraseña?',
          'login.submit': 'Entrar',
          'login.loginError': 'Error al iniciar sesión',
          'language': 'Idioma',
          'language.en': 'Inglés',
          'language.es': 'Español',
          'language.cat': 'Catalán',
          'language.select': 'Selecciona tu idioma',
          'login.login': 'Iniciar sesión',
          'login.register': 'Registrar',
          'login.forgotPassword': 'Olvidé mi contraseña',
          'signup.title': 'Crear una cuenta',
          'signup.email': 'Correo electrónico',
          'signup.emailExists': 'El correo electrónico ya existe',
          'signup.username': 'Nombre de usuario',
          'signup.usernameError': 'El nombre de usuario es incorrecto. Mínimo 5 caracteres, sin espacios y máximo 20 caracteres',
          'signup.usernameExists': 'El nombre de usuario ya existe',
          'signup.password': 'Contraseña',
          'signup.confirmPassword': 'Confirmar contraseña',
          'signup.submit': 'Crear cuenta',
          'signup.login': '¿Ya tienes una cuenta? Inicia sesión',
          'signup.passwordMismatch': 'Las contraseñas no coinciden',
          'signup.passwordLength': 'La contraseña debe tener al menos 6 caracteres',
          'signup.invalidEmail': 'Correo electrónico no válido',
          'signup.emptyFields': 'Todos los campos son obligatorios',
          'modal.close': 'Cerrar',
          'modal.error': 'Error',
          'modal.success': 'Éxito',
          'modal.warning': 'Advertencia',
          'modal.info': 'Información',
          'modal.confirm': 'Confirmar',
          'modal.cancel': 'Cancelar',
          'modal.save': 'Guardar',
          'modal.delete': 'Eliminar',
          'modal.edit': 'Editar',
          'categoria.title': 'Crear Categoría',
          'categoria.edit': 'Editar Categoría',
          'categoria.form.title': 'Título',
          'categoria.form.description': 'Descripción',
          'categoria.form.fields': 'Campos',
          'categoria.form.addField': 'Añadir Campo',
          'categoria.form.fieldPlaceholder': 'Nombre del campo',
          'categoria.form.save': 'Guardar',
          'categoria.form.update': 'Actualizar',
          'categoria.form.cancel': 'Cancelar',
          'categoria.form.back': 'Volver',
          'categoria.form.field': 'campo',
          'categoria.form.fieldsPlural': 'campos',
          'categoria.error.server': 'Error del servidor',
          'categoria.error.unknown': 'Error desconocido',
          'categoria.error.loading': 'Error al cargar la categoría',
          'categoria.error.saving': 'Error al guardar la categoría',
          'categoria.validation.emptyFields': 'Los campos no pueden estar vacíos',
          'categoria.success.created': 'Categoría creada correctamente',
          'categoria.success.updated': 'Categoría actualizada correctamente',
          'categoria.list.title': 'Lista de Categorías',
          'categoria.list.add': 'Añadir Categoría',
          'categoria.list.loading': 'Cargando categorías...',
          'categoria.list.error': 'Error al cargar las categorías:',
          'categoria.list.empty': 'No hay categorías disponibles',
          'categoria.list.delete.title': '¿Está seguro?',
          'categoria.list.delete.text': 'Esta acción eliminará la categoría permanentemente',
          'categoria.list.delete.confirm': 'Sí, eliminar',
          'categoria.list.delete.cancel': 'Cancelar',
          'categoria.list.delete.success': 'Categoría eliminada exitosamente',
          'categoria.list.delete.error': 'Error al eliminar la categoría',
          'navigation.static': 'Enlaces Estáticos',
          'navigation.dynamic': 'Menú Contextual',
          'login.session_expired': 'Sesión expirada. Por favor, inicie sesión de nuevo.',
          'auth.access_denied': 'Acceso denegado: El rol {role} no tiene permisos para acceder a esta página.',
          'auth.login_required': 'Inicia sesión para continuar.',
          'auth.unexpected_error': 'Ha ocurrido un error inesperado.',
          'roles.ADMIN': 'Administrador',
          'roles.COMPRADOR': 'Comprador',
          'roles.VENDEDOR': 'Vendedor',
          'roles.TRABAJADOR': 'Trabajador',
          'header.welcome': 'Bienvenido',
          'header.menu': 'Menú',
          'header.toggle_menu': 'Alternar menú',
          'route.home': 'Inicio',
          'route.login': 'Iniciar sesión',
          'route.signup': 'Registrarse',
          'route.profile': 'Perfil',
          'route.categories': 'Categorías',
          'route.create_category': 'Crear Categoría',
          'route.edit_category': 'Editar Categoría',
          'error.404': 'Página no encontrada',
          'error.403': 'Acceso prohibido',
          'error.500': 'Error del servidor',
          'error.generic': 'Algo salió mal',
          'actions.save': 'Guardar',
          'actions.cancel': 'Cancelar',
          'actions.edit': 'Editar',
          'actions.delete': 'Eliminar',
          'actions.view': 'Ver',
          'actions.back': 'Volver',
          'actions.next': 'Siguiente',
          'actions.previous': 'Anterior',
          'common.loading': 'Cargando...',
          'common.error': 'Error',
          'common.success': 'Éxito',
          'common.warning': 'Advertencia',
          'common.info': 'Información',
        },
        cat: {
          'producto.list.error': 'Error en carregar els productes',
          'producto.list.empty': 'No hi ha productes disponibles',
          'producto.details': 'Veure Detalls',
          'producto.buy': 'Comprar',
          'producto.price': 'Preu',
          'producto.stock': 'Estoc',
          'producto.brand': 'Marca',
          'producto.state': 'Estat',
          'producto.available': '{stock} disponibles',
          'producto.no_stock': 'Sense estoc',
          'producto.loading': 'Carregant productes...',
          'common.ok': 'D\'acord',
          'links.categoria.add': 'Afegir categoria',
          'links.categoria.list': 'Llista de categories',
          'links.dashboard': 'Tauler de control',
          'links.settings': 'Configuració',
          'links.profile': 'Perfil',
          'links.help': 'Ajuda',
          'links.logout': 'Tancar sessió',
          'login.title': 'Iniciar sessió',
          'login.email': 'Correu electrònic',
          'login.username': 'Nom d\'usuari',
          'login.password': 'Contrasenya',
          'login.usernamePassword': 'Nom d\'usuari o contrasenya incorrectes',
          'login.allInputs': 'Tots els camps són obligatoris. Si us plau, completa tots els camps.',
          'login.remember': 'Recorda\'m',
          'login.forgot': 'Has oblidat la teva contrasenya?',
          'login.submit': 'Entrar',
          'login.loginError': 'Error en iniciar sessió',
          'language': 'Idioma',
          'language.en': 'Anglès',
          'language.es': 'Espanyol',
          'language.cat': 'Català',
          'language.select': 'Selecciona el teu idioma',
          'login.login': 'Iniciar sessió',
          'login.register': 'Registrar',
          'login.forgotPassword': 'He oblidat la meva contrasenya',
          'signup.title': 'Crear un compte',
          'signup.email': 'Correu electrònic',
          'signup.emailExists': 'El correu electrònic ja existeix',
          'signup.username': 'Nom d\'usuari',
          'signup.usernameError': 'El nom d\'usuari és incorrecte. Com a mínim 5 caràcters, sense espais i màxim 20 caràcters',
          'signup.usernameExists': 'El nom d\'usuari ja existeix',
          'signup.password': 'Contrasenya',
          'signup.confirmPassword': 'Confirmar contrasenya',
          'signup.submit': 'Crear compte',
          'signup.login': 'Ja tens un compte? Inicia sessió',
          'signup.passwordMismatch': 'Les contrasenyes no coincideixen',
          'signup.passwordLength': 'La contrasenya ha de tenir almenys 6 caràcters',
          'signup.invalidEmail': 'Correu electrònic no vàlid',
          'signup.emptyFields': 'Tots els camps són obligatoris',
          'modal.close': 'Tancar',
          'modal.error': 'Error',
          'modal.success': 'Èxit',
          'modal.warning': 'Advertència',
          'modal.info': 'Informació',
          'modal.confirm': 'Confirmar',
          'modal.cancel': 'Cancel·lar',
          'modal.save': 'Desar',
          'modal.delete': 'Eliminar',
          'modal.edit': 'Editar',
          'categoria.title': 'Crear Categoria',
          'categoria.edit': 'Editar Categoria',
          'categoria.form.title': 'Títol',
          'categoria.form.description': 'Descripció',
          'categoria.form.fields': 'Camps',
          'categoria.form.addField': 'Afegir Camp',
          'categoria.form.fieldPlaceholder': 'Nom del camp',
          'categoria.form.save': 'Desar',
          'categoria.form.update': 'Actualitzar',
          'categoria.form.cancel': 'Cancel·lar',
          'categoria.form.back': 'Tornar',
          'categoria.form.field': 'camp',
          'categoria.form.fieldsPlural': 'camps',
          'categoria.error.server': 'Error del servidor',
          'categoria.error.unknown': 'Error desconegut',
          'categoria.error.loading': 'Error en carregar la categoria',
          'categoria.error.saving': 'Error en desar la categoria',
          'categoria.validation.emptyFields': 'Els camps no poden estar buits',
          'categoria.success.created': 'Categoria creada correctament',
          'categoria.success.updated': 'Categoria actualitzada correctament',
          'categoria.list.title': 'Llista de Categories',
          'categoria.list.add': 'Afegir Categoria',
          'categoria.list.loading': 'Carregant categories...',
          'categoria.list.error': 'Error en carregar les categories:',
          'categoria.list.empty': 'No hi ha categories disponibles',
          'categoria.list.delete.title': 'Està segur?',
          'categoria.list.delete.text': 'Aquesta acció eliminarà la categoria permanentment',
          'categoria.list.delete.confirm': 'Sí, eliminar',
          'categoria.list.delete.cancel': 'Cancel·lar',
          'categoria.list.delete.success': 'Categoria eliminada amb èxit',
          'categoria.list.delete.error': 'Error en eliminar la categoria',
          'navigation.static': 'Enllaços Estàtics',
          'navigation.dynamic': 'Menú Contextual',
          'login.session_expired': 'Sessió expirada. Si us plau, iniciï sessió de nou.',
          'auth.access_denied': 'Accés denegat: El rol {role} no té permisos per accedir a aquesta pàgina.',
          'auth.login_required': 'Inicia sessió per continuar.',
          'auth.unexpected_error': 'Ha ocorregut un error inesperat.',
          'roles.ADMIN': 'Administrador',
          'roles.COMPRADOR': 'Comprador',
          'roles.VENDEDOR': 'Venedor',
          'roles.TRABAJADOR': 'Treballador',
          'header.welcome': 'Benvingut',
          'header.menu': 'Menú',
          'header.toggle_menu': 'Alternar menú',
          'route.home': 'Inici',
          'route.login': 'Iniciar sessió',
          'route.signup': 'Registrar-se',
          'route.profile': 'Perfil',
          'route.categories': 'Categories',
          'route.create_category': 'Crear Categoria',
          'route.edit_category': 'Editar Categoria',
          'error.404': 'Pàgina no trobada',
          'error.403': 'Accés prohibit',
          'error.500': 'Error del servidor',
          'error.generic': 'Alguna cosa ha anat malament',
          'actions.save': 'Desar',
          'actions.cancel': 'Cancel·lar',
          'actions.edit': 'Editar',
          'actions.delete': 'Eliminar',
          'actions.view': 'Veure',
          'actions.back': 'Tornar',
          'actions.next': 'Següent',
          'actions.previous': 'Anterior',
          'common.loading': 'Carregant...',
          'common.error': 'Error',
          'common.success': 'Èxit',
          'common.warning': 'Advertència',
          'common.info': 'Informació',
        },
      } as Translations
    };
  },
  actions: {
    setLanguage(lang: string) {
      this.currentLanguage = lang;
      // Save the language preference in cookies for 30 days
      Cookies.set('language', lang, { expires: 30, path: '/' });
    },
    t(key: string): string {
      return this.translations[this.currentLanguage][key] || key;
    }
  },
  getters: {
    getCurrentLanguage: (state) => {
      return state.currentLanguage;
    }
  }
});
export default useutf8Store;
